<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‰“ç«æœºæ—…ç¨‹</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="container welcome-screen">
        <h1 class="pixel-text">
            <span class="pixel-icon">ğŸ”¥</span> æµæµªç«æœºæ—…ç¨‹è®°å½•
        </h1>
        
        <div class="lighter-number-display">
            NO.<span id="currentNumber"></span> å·æµªå­ç«æœº
        </div>
        
        <div class="usage-count">
            ä½ æ˜¯è¿™ä¸ªç«æœºç¬¬ <span id="userCount">0</span> ä¸»äºº
        </div>
        
        <p class="pixel-text">
            æ²ˆåºæ¡¦å¯¼æ¼”è“„æ„ä¸¢å¤±äº†25ä¸ªLighter<br>
            æ¯ä¸ªæ‰“ç«æœºéƒ½åœ¨è®°å½•ç€ä¸åŒçš„æ•…äº‹<br>
            ç°åœ¨ï¼Œè½®åˆ°ä½ æ¥ç»­å†™è¿™æ®µæ—…ç¨‹äº†ï¼
        </p>
        
        <button class="start-button pixel-text" onclick="location.href='/form?number=' + lighterNumber">
            ğŸ“ ç•™ä¸‹æˆ‘çš„æ•…äº‹
        </button>
    </div>
    
    <script>
        // ä»URLè·å–æ‰“ç«æœºç¼–å·
        const urlParams = new URLSearchParams(window.location.search);
        const lighterNumber = urlParams.get('number');
        
        if (!lighterNumber) {
            // å¦‚æœæ²¡æœ‰ç¼–å·å‚æ•°ï¼Œæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
            document.querySelector('.welcome-screen').innerHTML = `
                <h1 class="pixel-text">
                    <span class="pixel-icon">âš ï¸</span> è®¿é—®é”™è¯¯
                </h1>
                <p class="pixel-text">
                    è¯·é€šè¿‡æ‰“ç«æœºä¸Šçš„äºŒç»´ç è®¿é—®æœ¬é¡µé¢
                </p>
            `;
        } else {
            document.getElementById('currentNumber').textContent = lighterNumber;
            
            // è·å–ä½¿ç”¨æ¬¡æ•°
            fetch(`/api/usage-count/${lighterNumber}`)
                .then(response => response.json())
                .then(data => {
                    document.getElementById('userCount').textContent = data.count;
                });
        }
    </script>
</body>
</html> 